<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>String & Pattern Matching Lab</title>
    <!-- Import Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Import Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Use Inter font family */
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        /* Light mode styling */
        body.light-mode {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            color: #0f172a;
        }
        
        /* Dark mode styling */
        body.dark-mode {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #f1f5f9;
        }
        
        /* Card styling for both modes */
        .lab-card {
            transition: all 0.3s;
        }
        
        body.light-mode .lab-card {
            background-color: #ffffff;
            color: #0f172a;
        }
        
        body.dark-mode .lab-card {
            background-color: #1e293b;
            color: #f1f5f9;
            border: 1px solid #334155;
        }
        
        /* Input styling for both modes */
        body.light-mode input,
        body.light-mode textarea {
            background-color: #ffffff;
            border-color: #d1d5db;
            color: #0f172a;
        }
        
        body.dark-mode input,
        body.dark-mode textarea {
            background-color: #334155;
            border-color: #475569;
            color: #f1f5f9;
        }
        
        /* Output box styling */
        body.light-mode pre,
        body.light-mode .output-box {
            background-color: #f9fafb;
            border-color: #e5e7eb;
            color: #0f172a;
        }
        
        body.dark-mode pre,
        body.dark-mode .output-box {
            background-color: #0f172a;
            border-color: #334155;
            color: #f1f5f9;
        }
        
        /* Custom style for highlighted text */
        .highlight {
            background-color: #fde047; /* yellow-300 */
            font-weight: 600;
            border-radius: 3px;
            padding: 0 2px;
        }
        
        body.dark-mode .highlight {
            background-color: #facc15;
            color: #0f172a;
        }
        
        /* Custom scrollbar for output boxes */
        pre::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        pre::-webkit-scrollbar-thumb {
            background-color: #9ca3af; /* gray-400 */
            border-radius: 4px;
        }
        pre::-webkit-scrollbar-track {
            background-color: #e5e7eb; /* gray-200 */
            border-radius: 4px;
        }
        
        body.dark-mode pre::-webkit-scrollbar-thumb {
            background-color: #64748b;
        }
        body.dark-mode pre::-webkit-scrollbar-track {
            background-color: #1e293b;
        }
        
        /* Header text colors */
        body.light-mode h1,
        body.light-mode h2,
        body.light-mode h3 {
            color: inherit;
        }
        
        body.dark-mode h1 {
            color: #f1f5f9;
        }
        
        /* Label styling */
        body.dark-mode label {
            color: #cbd5e1;
        }
    </style>
</head>
<body class="dark-mode min-h-screen p-4 sm:p-8">
    <div class="max-w-6xl mx-auto">
        
        <!-- Header with Controls -->
        <header class="mb-8">
            <div class="flex justify-between items-start mb-4">
                <div class="flex-1">
                    <h1 class="text-3xl sm:text-4xl font-bold mb-2">Lab: String & Pattern Matching</h1>
                    <p class="text-base sm:text-lg opacity-80">An interactive lab to visualize and understand matching algorithms.</p>
                </div>
                <div class="flex gap-2 ml-4">
                    <button id="mode-toggle" class="px-3 py-2 sm:px-4 sm:py-2 rounded-lg font-medium transition-colors bg-gray-700 hover:bg-gray-600 text-white" aria-label="Toggle dark/light mode">
                        ‚òÄÔ∏è
                    </button>
                    <button onclick="history.back()" class="px-3 py-2 sm:px-4 sm:py-2 rounded-lg font-medium transition-colors bg-gray-700 hover:bg-gray-600 text-white" title="Go Back">
                        ‚Üê Back
                    </button>
                </div>
            </div>
        </header>

        <!-- Grid for Lab Stations -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">

            <!-- Lab Station 1: Template Matching (Naive Search) -->
            <div class="lab-card bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-xl sm:text-2xl font-semibold text-blue-700 mb-1">1. Template Matching</h2>
                <p class="text-xs sm:text-sm opacity-70 mb-4">(Naive/Brute-Force Search)</p>
                <p class="text-sm sm:text-base mb-4">
                    This algorithm slides a "template" (the pattern) across the text one character at a time and checks for a match. It's simple but can be inefficient.
                </p>

                <div class="space-y-4">
                    <div>
                        <label for="naive-text" class="block text-sm font-medium mb-1">Text:</label>
                        <textarea id="naive-text" rows="4" class="mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border">The quick brown fox jumps over the lazy dog. The dog was not amused.</textarea>
                    </div>
                    <div>
                        <label for="naive-pattern" class="block text-sm font-medium mb-1">Pattern:</label>
                        <input type="text" id="naive-pattern" value="dog" class="mt-1 block w-full rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border">
                    </div>
                    <button id="run-naive" class="w-full bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">
                        Run Naive Search
                    </button>
                    <div>
                        <h3 class="font-semibold text-sm sm:text-base">Results:</h3>
                        <p id="naive-stats" class="text-xs sm:text-sm opacity-80"></p>
                        <pre id="naive-output" class="output-box mt-2 p-4 rounded-md text-xs sm:text-sm whitespace-pre-wrap h-32 overflow-y-auto border"></pre>
                    </div>
                </div>
            </div>

            <!-- Lab Station 2: Feature-Based Matching (Regex) -->
            <div class="lab-card bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-xl sm:text-2xl font-semibold text-green-700 mb-1">2. Feature & Pattern Matching</h2>
                <p class="text-xs sm:text-sm opacity-70 mb-4">(Regular Expressions)</p>
                <p class="text-sm sm:text-base mb-4">
                    Regular Expressions (Regex) match complex patterns, not just fixed strings. They define a "search pattern" to find features like email addresses, phone numbers, or specific word structures.
                </p>

                <div class="space-y-4">
                    <div>
                        <label for="regex-text" class="block text-sm font-medium mb-1">Text:</label>
                        <textarea id="regex-text" rows="4" class="mt-1 block w-full rounded-md shadow-sm focus:border-green-500 focus:ring-green-500 p-2 border">Contact us at support@example.com or sales@test.org. Our main number is (123) 456-7890.</textarea>
                    </div>
                    <div>
                        <label for="regex-pattern" class="block text-sm font-medium mb-1">Regex Pattern:</label>
                        <input type="text" id="regex-pattern" value="\w+@\w+\.\w+" class="mt-1 block w-full rounded-md shadow-sm focus:border-green-500 focus:ring-green-500 p-2 font-mono border">
                    </div>
                    <button id="run-regex" class="w-full bg-green-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-75">
                        Run Regex Search
                    </button>
                    <div>
                        <h3 class="font-semibold text-sm sm:text-base">Matches:</h3>
                        <pre id="regex-output" class="output-box mt-2 p-4 rounded-md text-xs sm:text-sm whitespace-pre-wrap h-32 overflow-y-auto border"></pre>
                    </div>
                </div>
            </div>

            <!-- Lab Station 3: Probabilistic/Statistical Matching -->
            <div class="lab-card bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-xl sm:text-2xl font-semibold text-purple-700 mb-1">3. Probabilistic/Fuzzy Matching</h2>
                <p class="text-xs sm:text-sm opacity-70 mb-4">(Levenshtein Edit Distance)</p>
                <p class="text-sm sm:text-base mb-4">
                    This calculates the "distance" between two strings (how many edits‚Äîinsertions, deletions, substitutions‚Äîare needed to change one into the other). A low score means the strings are very similar.
                </p>

                <div class="space-y-4">
                    <div>
                        <label for="lev-string1" class="block text-sm font-medium mb-1">String 1:</label>
                        <input type="text" id="lev-string1" value="kitten" class="mt-1 block w-full rounded-md shadow-sm focus:border-purple-500 focus:ring-purple-500 p-2 border">
                    </div>
                    <div>
                        <label for="lev-string2" class="block text-sm font-medium mb-1">String 2:</label>
                        <input type="text" id="lev-string2" value="sitting" class="mt-1 block w-full rounded-md shadow-sm focus:border-purple-500 focus:ring-purple-500 p-2 border">
                    </div>
                    <button id="run-levenshtein" class="w-full bg-purple-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-75">
                        Calculate Distance
                    </button>
                    <div>
                        <h3 class="font-semibold text-sm sm:text-base">Result:</h3>
                        <div id="lev-output" class="output-box mt-2 p-4 rounded-md border">
                            <p class="text-lg font-bold text-purple-700"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lab Station 4: Structural Matching (Explanation) -->
            <div class="lab-card bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-xl sm:text-2xl font-semibold text-yellow-700 mb-1">4. Structural (Graph) Matching</h2>
                <p class="text-xs sm:text-sm opacity-70 mb-4">(Conceptual Overview)</p>
                <div class="text-sm sm:text-base space-y-4">
                    <p>
                        Structural matching goes beyond simple strings to compare the <em>relationships</em> between components. This is often modeled using graphs.
                    </p>
                    <p>
                        Instead of matching text, it matches nodes (the items) and edges (the relationships between them).
                    </p>
                    <p class="font-semibold">Where is this used?</p>
                    <ul class="list-disc list-inside pl-2 space-y-1">
                        <li><span class="font-semibold">Expert Systems:</span> Matching a patient's <em>set of symptoms and their connections</em> to a graph of known diseases.</li>
                        <li><span class="font-semibold">Chemistry:</span> Finding if a chemical <em>structure</em> (a graph of atoms and bonds) exists within a larger molecule.</li>
                        <li><span class="font-semibold">NLP:</span> Matching a sentence's <em>syntactic parse tree</em> to a known grammatical pattern to understand its meaning.</li>
                    </ul>
                    <p>
                        Because it involves complex graph theory, it's a bit beyond our simple string lab, but it's a key concept in advanced AI!
                    </p>
                </div>
            </div>

        </div>
    </div>

    <!-- JavaScript for Lab Logic -->
    <script>
        // --- Lab 1: Naive Search ---
        document.getElementById('run-naive').addEventListener('click', () => {
            const text = document.getElementById('naive-text').value;
            const pattern = document.getElementById('naive-pattern').value;
            const outputEl = document.getElementById('naive-output');
            const statsEl = document.getElementById('naive-stats');

            if (!pattern) {
                outputEl.textContent = 'Please enter a pattern.';
                statsEl.textContent = 'Found 0 matches. 0 comparisons.';
                return;
            }

            const indices = [];
            let comparisons = 0;
            const textLen = text.length;
            const patternLen = pattern.length;

            // The naive search algorithm
            for (let i = 0; i <= textLen - patternLen; i++) {
                let j;
                for (j = 0; j < patternLen; j++) {
                    comparisons++;
                    if (text[i + j] !== pattern[j]) {
                        break;
                    }
                }
                if (j === patternLen) {
                    indices.push(i);
                }
            }

            // Display statistics
            statsEl.textContent = `Found ${indices.length} match(es). Total comparisons: ${comparisons}.`;

            // Display highlighted results
            let highlightedText = '';
            let lastIndex = 0;
            for (const index of indices) {
                // Add text before the match
                highlightedText += text.substring(lastIndex, index);
                // Add the highlighted match
                highlightedText += `<span class="highlight">${text.substring(index, index + patternLen)}</span>`;
                lastIndex = index + patternLen;
            }
            // Add any remaining text
            highlightedText += text.substring(lastIndex);

            outputEl.innerHTML = highlightedText;
        });

        // --- Lab 2: Regex Search ---
        document.getElementById('run-regex').addEventListener('click', () => {
            const text = document.getElementById('regex-text').value;
            const pattern = document.getElementById('regex-pattern').value;
            const outputEl = document.getElementById('regex-output');

            try {
                const regex = new RegExp(pattern, 'g');
                const matches = Array.from(text.matchAll(regex));

                if (matches.length === 0) {
                    outputEl.textContent = 'No matches found.';
                } else {
                    let output = '';
                    matches.forEach((match, i) => {
                        output += `Match ${i + 1}:\n`;
                        output += `  Full Match: ${match[0]}\n`;
                        if (match.groups) {
                            output += `  Groups: ${JSON.stringify(match.groups)}\n`;
                        }
                        output += `  Index: ${match.index}\n\n`;
                    });
                    outputEl.textContent = output.trim();
                }
            } catch (e) {
                outputEl.textContent = `Error in Regex: ${e.message}`;
            }
        });

        // --- Lab 3: Levenshtein Distance ---
        document.getElementById('run-levenshtein').addEventListener('click', () => {
            const s1 = document.getElementById('lev-string1').value;
            const s2 = document.getElementById('lev-string2').value;
            const outputEl = document.getElementById('lev-output').querySelector('p');

            const distance = (s1, s2) => {
                const track = Array(s2.length + 1).fill(null).map(() =>
                    Array(s1.length + 1).fill(null));
                for (let i = 0; i <= s1.length; i += 1) {
                    track[0][i] = i;
                }
                for (let j = 0; j <= s2.length; j += 1) {
                    track[j][0] = j;
                }
                for (let j = 1; j <= s2.length; j += 1) {
                    for (let i = 1; i <= s1.length; i += 1) {
                        const indicator = s1[i - 1] === s2[j - 1] ? 0 : 1;
                        track[j][i] = Math.min(
                            track[j][i - 1] + 1, // deletion
                            track[j - 1][i] + 1, // insertion
                            track[j - 1][i - 1] + indicator, // substitution
                        );
                    }
                }
                return track[s2.length][s1.length];
            };

            const dist = distance(s1, s2);
            outputEl.textContent = `Edit Distance: ${dist}`;
        });

        // Auto-run on load to populate
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('run-naive').click();
            document.getElementById('run-regex').click();
            document.getElementById('run-levenshtein').click();
        });

        // --- Theme Toggle Functionality ---
        const modeToggle = document.getElementById('mode-toggle');
        const body = document.body;

        // Check for saved theme preference or default to dark mode
        const currentTheme = localStorage.getItem('theme') || 'dark-mode';
        body.classList.add(currentTheme);
        updateModeToggleIcon();

        modeToggle.addEventListener('click', () => {
            if (body.classList.contains('light-mode')) {
                body.classList.remove('light-mode');
                body.classList.add('dark-mode');
                localStorage.setItem('theme', 'dark-mode');
            } else {
                body.classList.remove('dark-mode');
                body.classList.add('light-mode');
                localStorage.setItem('theme', 'light-mode');
            }
            updateModeToggleIcon();
        });

        function updateModeToggleIcon() {
            if (body.classList.contains('light-mode')) {
                modeToggle.textContent = 'üåô';
            } else {
                modeToggle.textContent = '‚òÄÔ∏è';
            }
        }
    </script>
</body>
</html>